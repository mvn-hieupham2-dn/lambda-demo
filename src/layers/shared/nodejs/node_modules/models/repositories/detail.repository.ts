import { Repository } from 'typeorm'

import { AppDataSource } from 'models/index'
import { Detail } from 'models/entities/detail.entity'

export class DetailRepository extends Repository<Detail> {
  constructor() {
    super(Detail, AppDataSource.manager)
  }

  public createDetail(
    discount:number, quantity: number,unit_price:number
  ) {
    return this.save(this.create({ discount, quantity,unit_price }))
  }
  public async updateDetail(id: number, values: {discount: number, quantity: number, unit_price: number}) {
    await this.createQueryBuilder()
      .update(Detail)
      .set({...values})
      .where('product.id = :id')
      .setParameters({ id })
      .execute()
  }
}

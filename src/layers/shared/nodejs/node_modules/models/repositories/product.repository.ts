import { Repository } from 'typeorm'
import { AppDataSource } from 'models/index'
import { Product } from 'models/entities/product.entity'

export class ProductRepository extends Repository<Product> {
  constructor() {
    super(Product, AppDataSource.manager)
  }

  public createProduct(
    name: string,
    size : number,
    description: string
  ) {
    return this.save(this.create({ name, size ,description }))
  }
  public async updateProduct(id: number, values: {name: string, size : number, description: string}) {
    await this.createQueryBuilder()
      .update(Product)
      .set({...values})
      .where('product.id = :id')
      .setParameters({ id })
      .execute()
  }
  public softDeleteProduct(id: number) {
    return this.softDelete(id)
  }
}
